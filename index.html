<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Kredit CMS</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f2f5;
      margin: 0; padding: 0;
    }
    .container {
      max-width: 500px;
      margin: 30px auto;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h2 { text-align:center; color:#007BFF; margin-bottom:25px; }
    label { font-weight:600; margin-bottom:5px; display:block; }
    input, select {
      width:100%; padding:12px; margin-bottom:15px;
      font-size:16px; border-radius:6px;
      border:1px solid #ccc;
    }
    button {
      width:100%; background:#007BFF; color:white;
      padding:14px; font-size:16px;
      border:none; border-radius:6px;
      cursor:pointer; transition:background .3s;
    }
    button:hover { background:#0056b3; }
    #result {
      margin-top:20px; background:#f8f9fa;
      border:1px solid #ddd; border-radius:6px;
      padding:15px;
    }
    strong { color:#333; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Kalkulator Kredit CMS</h2>
    <label for="otr">Harga OTR (Rp):</label>
    <input type="text" id="otr" placeholder="20.560.000" value="20.560.000" oninput="formatRupiah(this)" />
    <label for="dp">DP Price List (Rp):</label>
    <input type="text" id="dp" placeholder="5.000.000" value="5.000.000" oninput="formatRupiah(this)" />
    <label for="tenor">Pilih Tenor (bulan):</label>
    <select id="tenor">
      <option value="11">11</option>
      <option value="17">17</option>
      <option value="23">23</option>
      <option value="29">29</option>
      <option value="35" selected>35</option>
    </select>
    <button onclick="hitungAngsuran()">Hitung Angsuran</button>
    <div id="result"></div>
  </div>

  <script>
    function formatRupiah(input) {
      let v = input.value.replace(/\D/g, '');
      let s='', j=0;
      for (let i=v.length-1; i>=0; i--, j++) {
        s = v[i] + s;
        if(j%3===2 && i!==0) s = '.' + s;
      }
      input.value = s;
    }

    function unformat(str) {
      return parseInt(str.replace(/\./g,''))||0;
    }

    function bulat5000(x) {
      return Math.ceil(x/5000)*5000;
    }

    function hitungAngsuran() {
      const otr = unformat(document.getElementById('otr').value);
      const dp  = unformat(document.getElementById('dp').value);
      const tenor = parseInt(document.getElementById('tenor').value);

      if(otr<=0||dp<=0||dp>=otr) {
        alert('Masukkan OTR dan DP yang valid.');
        return;
      }

      const pokok = otr - dp;
      const faktor = {
        11: 0.10701, 17: 0.07522, 23: 0.05882,
        29: 0.05013, 35: 0.04466
      };

      const fp = faktor[tenor];
      if(!fp) {
        document.getElementById('result').innerHTML = 'Faktor bunga belum tersedia.';
        return;
      }

      const angsuranAsli = pokok * fp;
      const angsuranBulat = bulat5000(angsuranAsli);
      const cicilan = angsuranBulat * tenor;
      const totalBayar = cicilan + dp;
      const maxTac = Math.round(pokok * 0.175);

      document.getElementById('result').innerHTML = `
        <strong>Hasil Simulasi:</strong><br>
        Pokok Kredit: Rp${pokok.toLocaleString('id-ID')}<br>
        Angsuran/bln: <strong>Rp${angsuranBulat.toLocaleString('id-ID')}</strong><br>
        Total Cicilan: Rp${cicilan.toLocaleString('id-ID')}<br>
        Total Bayar: Rp${totalBayar.toLocaleString('id-ID')}<br>
        Max TAC (Rp): <strong>Rp${maxTac.toLocaleString('id-ID')}</strong>
      `;
    }
  </script>
</body>
</html>
